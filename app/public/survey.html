<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FriendFinder | Survey</title>
    <!-- Link Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Ubuntu|Vollkorn" rel="stylesheet">
    <!-- Link Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns"
        crossorigin="anonymous">
    <!-- Link Bootstrap Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <!-- Link Customized CSS -->
    <link href="./style.css" rel="stylesheet" type="text/css">

</head>

<body>
    <div id="survey" class="jumbotron jumbotron-fluid">
        <div class="container">
            <!-- jumbotron -->
            <div class="my-header jumbotron text-center hoverable p-4">

                <h1 class="display-4"><i class="fas fa-child"></i><i class="fas fa-child"></i> Playdate Friend Finder</h1>
                <hr class="my-4">
                <p class="lead"> <i class="fas fa-poll-h"></i> Survey Question</p>
                <p>Take this quiz to find a mom friend with a matching parenting style!</p>

            </div>
            <!-- jumbotron -->
        </div>
    </div>
    <div class="container">


        <!-- Survey Page -->
        <div class="row">
            <div class="col-lg-12">


                <div class="card">
                    <div class="card-header">
                        <h1>About You</h1>
                    </div>

                    <div class="card-body">
                        <form role="form" class="px-4 py-4" method="POST">
                            <!-- Name and Photo -->
                            <div class="form-group row">
                                <label for="user-name" class="col-sm-2 col-form-label">Name (Required)</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control form-control-plaintext" id="user-name"
                                        placeholder="Your Name Here">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="user-photo" class="col-sm-2 col-form-label">Link to Photo Image (Required)</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="user-photo" placeholder="http://yourImageURLhere.com">
                                </div>
                            </div>

                            <!-- Name and Photo -->

                            <!-- Part I: Beliefs -->
                            <hr>
                            <h3>Part I: Beliefs</h3>
                            <!-- Question 1 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q1">
                                    <h4>Question 1 </h4><br>
                                    <p>If we want children to respect us, we must first treat them with respect.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 1 -->
                            <!-- Question 2 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q2">
                                    <h4>Question 2 </h4><br>
                                    <p>Society would be better if parents were more strict with their kids.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 2 -->
                            <!-- Question 3 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q3">
                                    <h4>Question 3 </h4><br>
                                    <p>Children first have to learn that the parent is boss.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 3 -->
                            <!-- Question 4 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q4">
                                    <h4>Question 4 </h4><br>
                                    <p>If parents provide a good environment, children will pretty much raise
                                        themselves.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q4" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 4 -->
                            <!-- Question 5 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q5">
                                    <h4>Question 4 </h4><br>
                                    <p>Childhood is so short that parents should do everything to make it a happy time.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q5" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 5 -->
                            <!-- Part II: Actions -->
                            <hr>
                            <h3>Part II: Actions</h3>
                            <!-- Question 6 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q6">
                                    <h4>Question 6 </h4><br>
                                    <p>It is better to give a little ground and protect the peace than to stand firm
                                        and provoke a fight.</p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q6" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 6 -->
                            <!-- Question 7 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q7">
                                    <h4>Question 7 </h4><br>
                                    <p>I usually give my child choices between two appropriate alternatives rather than
                                        telling my child what to do.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q7" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 7 -->
                            <!-- Question 8 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q8">
                                    <h4>Question 8 </h4><br>
                                    <p>I wish my child wouldnâ€™t interrupt my conversations so often.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q8" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 8 -->
                            <!-- Question 9 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q9">
                                    <h4>Question 9 </h4><br>
                                    <p>When my child misbehaves, he or she usually knows what the consequences will be.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q9" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 9 -->
                            <!-- Question 10 -->
                            <div class="form-group">
                                <label class="control-label statement" for="q10">
                                    <h4>Question 10 </h4><br>
                                    <p>I usually give my child clear instructions as to how I want something done.
                                    </p>
                                </label>
                                <ul class='likert'>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="1">
                                        <label class="form-check-label">Strongly disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="2">
                                        <label class="form-check-label">Disagree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="3" checked>
                                        <label class="form-check-label">Neutral</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="4">
                                        <label class="form-check-label">Agree</label>
                                    </li>
                                    <li class="form-check">
                                        <input class="form-check-input" type="radio" name="q10" value="5">
                                        <label class="form-check-label">Strongly agree</label>
                                    </li>
                                </ul>
                            </div>
                            <!-- Question 10 -->

                            <!-- Submit Button -->
                            <div class="buttons">

                                <button type="button" class="submit btn-lg btn-outline-secondary" data-toggle="modal"
                                    data-target="#friendModal">Submit</button>
                            </div>

                    </div>
                    </form>
                </div>
            </div>



        </div>
    </div>
    <!-- Survey Page -->
    <!-- Footer -->
    <footer class="footer my-4">
        <hr>
        <div class="text-center center-block">
            <p><a href="/"><span class="fa fa-home"></span></a> | <a href="/api/friends">API Friends Link</a> | <a href="https://github.com/keenwilson/FriendFinder"
                    target="_blank">GitHub Repo</a></p>



        </div>
        <hr>
    </footer>
    <!-- Footer -->

    </div>

    <!-- Modal -->
    <div class="modal fade" id="friendModal" tabindex="-1" role="dialog" aria-labelledby="friendModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="friendModalLabel">Congratulations, <span id="yourName"></span>!</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">

                            <div class="circle">
                                <img id="yourPicture" class="profile-pic centered-and-cropped" src="">
                            </div>


                            <div class="circle">
                                <img id="friendPicture" class="profile-pic centered-and-cropped" src="">
                            </div>

                    </div>
                    <div class="row">
                        <span id="message"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Modal -->
<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="modalInvalidNameImageURL" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title" id="modalInvalidNameImageURL">Invalid Name or Image URL</h2>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Please type a name with more than one character, and place a link of an Image url with .jpeg, .jpg, .gif, .png file name.
            </div>
          </div>
        </div>
      </div>



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>


    <!-- Client-side Javascript handles how from data is sent to our server. -->
    <script type="text/javascript">


        $(".submit").on("click", function (event) {
            event.preventDefault();

            var inputName = $("#user-name").val().trim();
            var inputImageUrl = $("#user-photo").val().trim();

            // Check if user input is valid
            if ((inputName !== "") && (checkImageURL(inputImageUrl))) {
                // Here we grab the form elements
                var newFriend = {
                    name: inputName,
                    photo: inputImageUrl,
                    scores: [
                        $('input[name=q1]:checked').val(),
                        $('input[name=q2]:checked').val(),
                        $('input[name=q3]:checked').val(),
                        $('input[name=q4]:checked').val(),
                        $('input[name=q5]:checked').val(),
                        $('input[name=q6]:checked').val(),
                        $('input[name=q7]:checked').val(),
                        $('input[name=q8]:checked').val(),
                        $('input[name=q9]:checked').val(),
                        $('input[name=q10]:checked').val()
                    ]

                }
                console.log("newFriend:", JSON.stringify(newFriend));
            } else {
                // Pop open the modal dialog
                $('#alertModal').modal('show')
            };



            // This line is the magic. It"s very similar to the standard ajax function we used.
            // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
            // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
            // depending on if a tables is available or not.
            var currentURL = window.location.origin;
            $.post(currentURL + "/api/friends", newFriend, function (data) {

                console.log("responses data:", JSON.stringify(data));
                console.log("Matching friends");

                // Set the name and image values of friend match modal
                $("#yourName").text(newFriend.name)
                $("#yourPicture").attr("src", newFriend.photo);
                $("#friendPicture").attr("src", data.matchImage);
                $("#message").text("You're match is " + data.matchName);


                // Clear the form when submitting
                $("#user-name").val("");
                $("#user-photo").val("");
                $("#q1").val("");
                $("#q2").val("");
                $("#q3").val("");
                $("#q4").val("");
                $("#q5").val("");
                $("#q6").val("");
                $("#q7").val("");
                $("#q8").val("");
                $("#q9").val("");
                $("#q10").val("");

                // Pop open the modal dialog
                $('#friendModal').modal('show')

            });
            return false;
        });

        function checkImageURL(url) {
            return (url.match(/\.(jpeg|jpg|gif|png)$/) != null);
        }


    </script>
</body>

</html>